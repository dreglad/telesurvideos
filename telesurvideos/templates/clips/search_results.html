{% load clips_tags %}
{% for clip in clips %}
<li class="entry animate-box full" data-animate-effect="fadeIn">
  <a href="{% url "video" clip.slug %}">
    <i class="icon icon-play"></i>
    <div class="entry-img" style="background-image: url({{ clip.thumbnail_mediano }})"></div>
    <div class="entry-desc">
      <h3>{{ clip.titulo|truncatewords:15 }}</h3>
      <p>{{ clip.descripcion|truncatewords:50 }}</p>
    </div>
  </a>
  <div class="post-meta">
    <p class="seccion">
      {% include "includes/tags.html" %}
    </p>
    <small class="date-posted"> | {{ clip.duracion|print_duration }} | {{ clip.fecha.date }}</small>
  </div>
</li>
{% endfor %}

{% if clips|length == page_size %}
<div id="extra-results" class="container">
  <div class="text-center pagination">
    <a href="#" role="button" class="more btn">Mostrar más resultados</a>
    <script>
      $(function() {
        $('.pagination a').on('click', function(ev) {
          ev.preventDefault();
          $(this).text('Cargando más resultados...');
          $(this).attr('disabled', 'disabled');
          $.ajax({
            url: $.query.set('page', (parseInt($.query.get('page')) || 1) + 1).toString(),
          }).done(function(resp) {
            $('#extra-results').replaceWith(resp);
            contentWayPoint();
          });
        });
      })
    </script>
  </div>
</div>
{% endif %}
